!function(o){o.module("movieCtr",["movieCtr_home","movie_detail","movieCtr_movie_list"]).controller("search",["$scope","$window",function(o,e){o.searchMovie=function(){var t=o.keyWord;e.location.hash="search?q="+t}}])}(angular),function(o){var e=o.module("movie_detail",["ngRoute","jsonps"]);e.config(["$routeProvider",function(o){o.when("/details/:id",{templateUrl:"./detail/detail.html",controller:"detailController"})}]),e.controller("detailController",["$scope","jsonpService","$routeParams",function(o,e,t){var n=t.id;o.isShow=!0,e.jsonp({url:"https://api.douban.com/v2/movie/subject/"+n,params:{},callback:function(e){o.isShow=!1,console.log(e),o.data=e,o.$apply()}})}])}(angular),function(o){var e=o.module("movieCtr_home",["ngRoute"]);e.config(["$locationProvider",function(o){o.hashPrefix("")}]),e.config(["$routeProvider",function(o){o.when("/home_page",{templateUrl:"./home/home.html"})}])}(angular),function(o){o.module("jsonps",[]).service("jsonpService",["$window",function(o){this.jsonp=function(e){var t=e.url+"?";for(var n in e.params)t+=n+"="+e.params[n]+"&";var a="jsonp"+o.Math.random().toString().slice(2);o[a]=e.callback,t+="callback="+a;var i=o.document.createElement("script");i.src=t,o.document.body.appendChild(i)}}])}(angular),function(o){var e=o.module("movieCtr_movie_list",["ngRoute","jsonps"]);e.config(["$routeProvider",function(o){o.when("/:type/:page?",{templateUrl:"./movielist/movielist.html",controller:"movielist"})}]),e.controller("movielist",["$scope","jsonpService","$route","$routeParams","$window",function(o,e,t,n,a){console.log(1111),o.pageCount=10,o.isShow=!0,o.pageIndex=+n.page||1,e.jsonp({url:"https://api.douban.com/v2/movie/"+n.type,params:{count:o.pageCount,start:10*(o.pageIndex-1),q:n.q},callback:function(e){console.log(e),o.count=a.Math.ceil(e.total/o.pageCount),o.isShow=!1,o.data=e.subjects,o.$apply()}}),o.pageContent=function(e){e<1||e>o.count||t.updateParams({page:e})}}])}(angular);